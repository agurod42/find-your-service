(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[2],{"/z1B":function(e,t,a){"use strict";var r=a("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("2qtc");var s=r(a("kLXV")),d=r(a("pVnL")),i=r(a("q1tI")),l=r(a("hLjA"));r(a("Onig"));class o extends i.default.Component{constructor(e){if(super(e),this.formRef=i.default.createRef(),!e.mode)throw"ServiceModal requires a mode attribute"}render(){return i.default.createElement(s.default,(0,d.default)({},this.props,{destroyOnClose:!0,title:this.renderTitle(),onOk:()=>this.onOkButtonClick()}),i.default.createElement(l.default,{data:this.props.data,ref:this.formRef}))}renderTitle(){return`${this.props.mode[0].toUpperCase()}${this.props.mode.substr(1)} Service`}onOkButtonClick(e){if("function"===typeof this.props.onOk){var t=this.formRef.current.getForm().getFieldsValue();this.props.onOk(e,t)}}}t.default=o},Onig:function(e,t,a){"use strict";var r=a("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(a("dCQc"));class d{index(e){return s.default.request("get","services",e)}show(e){return s.default.request("get",`services/${e}`)}create(e){return s.default.request("post","services",e)}update(e,t){return s.default.request("put",`services/${e}`,t)}delete(e){return s.default.request("delete",`services/${e}`)}}var i=new d;t.default=i},SSZS:function(e,t,a){"use strict";var r=a("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.withApiUtils=void 0;var s=r(a("pVnL")),d=r(a("q1tI")),i=a("dtw8"),l=r(a("a/Iw")),o=()=>e=>{var t;return t=class extends d.default.Component{constructor(){super(...arguments),this.apiUtils={errorHandler:this.errorHandler.bind(this)},this.state={redirect:!1}}errorHandler(e,t){e.response&&403===e.response.status?(l.default.deauthenticate(),this.setState({redirect:!0})):t(e)}render(){return this.state.redirect?d.default.createElement(i.Redirect,{to:"/"}):d.default.createElement(e,(0,s.default)({},this.props,{apiUtils:this.apiUtils}))}},t};t.withApiUtils=o},"a/Iw":function(e,t,a){"use strict";var r=a("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(a("dCQc"));class d{authenticate(e,t){return s.default.request("post","auth",{email:e,password:t}).then(e=>{return s.default.authToken.set(e.data.token),e})}deauthenticate(){s.default.authToken.set(void 0)}isUserAuthenticated(){return null!==s.default.authToken.get()}}var i=new d;t.default=i},abFe:function(e,t,a){"use strict";var r=a("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("IzEo");var s=r(a("bx4M"));a("g9YV");var d=r(a("wCAj"));a("+L6B");var i,l,o,n,u=r(a("2/Rp")),c=r(a("q1tI")),f=r(a("/z1B")),p=a("SSZS"),h=a("fcsW"),m=r(a("Onig")),v=(i=(0,p.withApiUtils)(),l=(0,h.withAuthGuard)(),i(o=l((n=class extends c.default.Component{constructor(e){super(e),this.state={modalData:{},modalMode:"add",modalVisible:!1,services:[]},m.default.index().then(e=>this.setState({services:e.data})).catch(e=>this.props.apiUtils.errorHandler(e,()=>this.setState({error:e})))}render(){return c.default.createElement(s.default,{title:"Services",extra:c.default.createElement(u.default,{type:"primary",icon:"plus",onClick:()=>this.setState({modalData:{},modalMode:"add",modalVisible:!0})},"Add Service"),style:{width:"100%"}},c.default.createElement(d.default,{size:"small",columns:[{dataIndex:"title",title:"Title"},{dataIndex:"description",title:"Description"},{dataIndex:"address",title:"Address"},{dataIndex:"city",title:"City"},{dataIndex:"state",title:"State"},{dataIndex:"zip_code",title:"ZIP Code"},{dataIndex:"location",title:"Location",render:(e,t)=>`${t.location_lat},${t.location_lon}`},{render:(e,t)=>this.renderRowActions(t)}],dataSource:this.state.services,rowKey:"id"}),c.default.createElement(f.default,{data:this.state.modalData,mode:this.state.modalMode,visible:this.state.modalVisible,onOk:(e,t)=>this.onOkButtonClick(t),onCancel:()=>this.setState({modalVisible:!1})}))}renderRowActions(e){return c.default.createElement("div",null,c.default.createElement(u.default,{type:"default",icon:"edit",onClick:()=>this.onEditButtonClick(e)}),c.default.createElement(u.default,{type:"danger",icon:"delete",onClick:()=>this.onDeleteButtonClick(e)}))}onOkButtonClick(e){"add"===this.state.modalMode?m.default.create(e).then(e=>this.setState({modalVisible:!1,services:e.data})):"edit"===this.state.modalMode&&m.default.update(this.state.modalData.id,e).then(e=>this.setState({modalVisible:!1,services:e.data}))}onEditButtonClick(e){m.default.show(e.id).then(e=>this.setState({modalData:e.data,modalMode:"edit",modalVisible:!0})).catch(e=>this.props.apiUtils.errorHandler(e,()=>this.setState({error:e})))}onDeleteButtonClick(e){m.default.delete(e.id).then(e=>this.setState({services:e.data})).catch(e=>this.props.apiUtils.errorHandler(e,()=>this.setState({error:e})))}},o=n))||o)||o),g=v;t.default=g},dCQc:function(e,t,a){"use strict";var r=a("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(a("vDqi")),d=r(a("s4NR"));class i{constructor(){this.axios=s.default.create({baseURL:"https://find-your-service.herokuapp.com"}),this.authToken={get:()=>localStorage.getItem("fys-token"),set:e=>{e?localStorage.setItem("fys-token",e):localStorage.removeItem("fys-token")}}}request(e,t,a){return"get"===e.toLowerCase()&&a&&Object.keys(a).length&&(t+=d.default.stringify(a),a=void 0),this.authToken.get()&&(this.axios.defaults.headers.common["X-Auth-Token"]=this.authToken.get()),this.axios({method:e,url:`${t}`,data:a})}}var l=new i;t.default=l},fcsW:function(e,t,a){"use strict";var r=a("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.withAuthGuard=void 0;var s=r(a("q1tI")),d=a("dtw8"),i=r(a("a/Iw")),l=()=>e=>{return class extends s.default.Component{render(){return i.default.isUserAuthenticated()?s.default.createElement(e,this.props):s.default.createElement(d.Redirect,{to:"/"})}}};t.withAuthGuard=l},hLjA:function(e,t,a){"use strict";var r=a("284h"),s=a("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var d=s(a("o0o1")),i=s(a("yXPU"));a("lUTK");var l=s(a("BvKs"));a("y8nQ");var o=s(a("Vl3Y"));a("qVdP");var n=s(a("jsC+"));a("Pwec");var u=s(a("CtXQ"));a("5NDa");var c=s(a("5rEg")),f=s(a("q1tI")),p=r(a("bItr"));class h extends f.default.Component{constructor(){super(...arguments),this.formRules={email:[{required:!0,message:"Email is required"}],password:[{required:!0,message:"Password is required"}]},this.state={addressLoading:!1}}render(){return f.default.createElement(o.default,null,this.renderFormItem("title","Title",this.props.data.title,f.default.createElement(c.default,{autoFocus:!0,type:"text",placeholder:"Service #1"})),this.renderFormItem("description","Description",this.props.data.description,f.default.createElement(c.default,{type:"text",placeholder:"Lorem ipsum"})),this.renderFormItem("address","Address",this.props.data.address,f.default.createElement(p.default,{value:this.props.data.address||"",onChange:()=>this.onAddressChange(),onSelect:e=>this.onAddressSelect(e)},e=>{var t=e.loading,a=e.suggestions,r=e.getInputProps,s=e.getSuggestionItemProps;return f.default.createElement(n.default,{overlay:this.renderAddressSuggestionsMenu(a,s)},f.default.createElement(c.default,r({type:"text",autoFocus:!0,placeholder:"51 Sycamore Street",suffix:t?f.default.createElement(u.default,{type:"loading"}):void 0})))})),this.renderFormItem("city","City",this.props.data.city,f.default.createElement(c.default,{readOnly:!0,type:"text",placeholder:"New York",suffix:this.state.addressLoading?f.default.createElement(u.default,{type:"loading"}):void 0})),this.renderFormItem("state","State",this.props.data.state,f.default.createElement(c.default,{readOnly:!0,type:"text",placeholder:"NY",suffix:this.state.addressLoading?f.default.createElement(u.default,{type:"loading"}):void 0})),this.renderFormItem("zip_code","ZIP Code",this.props.data.zip_code,f.default.createElement(c.default,{readOnly:!0,type:"text",placeholder:"10025",suffix:this.state.addressLoading?f.default.createElement(u.default,{type:"loading"}):void 0})),this.renderFormItem("location_lat","Latitude",this.props.data.location_lat,f.default.createElement(c.default,{readOnly:!0,type:"text",placeholder:"40.7998309",suffix:this.state.addressLoading?f.default.createElement(u.default,{type:"loading"}):void 0})),this.renderFormItem("location_lon","Longitude",this.props.data.location_lon,f.default.createElement(c.default,{readOnly:!0,type:"text",placeholder:"-73.9703027",suffix:this.state.addressLoading?f.default.createElement(u.default,{type:"loading"}):void 0})))}renderAddressSuggestionsMenu(e,t){return f.default.createElement(l.default,null,e.map(e=>f.default.createElement(l.default.Item,t(e),e.description)))}renderFormItem(e,t,a,r){return f.default.createElement(o.default.Item,{label:t,labelCol:{xs:{span:24,span:6}},wrapperCol:{xs:{span:24,span:18}}},this.props.form.getFieldDecorator(e,{initialValue:a,rules:this.formRules[e]})(r))}onAddressChange(){this.props.form.setFieldsValue({state:"",city:"",zip_code:"",location_lat:"",location_lon:""})}onAddressSelect(e){var t=this;return(0,i.default)(d.default.mark(function a(){var r,s,i;return d.default.wrap(function(a){while(1)switch(a.prev=a.next){case 0:return t.setState({addressLoading:!0}),a.next=3,(0,p.geocodeByAddress)(e);case 3:return r=a.sent,a.next=6,(0,p.getLatLng)(r[0]);case 6:s=a.sent,i={address:e,location_lat:s.lat,location_lon:s.lng},r[0].address_components.forEach(e=>{var t={state:"administrative_area_level_1",city:"locality",zip_code:"postal_code"};for(var a in t)e.types.indexOf(t[a])>=0&&(i[a]=e.long_name)}),t.props.form.setFieldsValue(i),t.setState({addressLoading:!1});case 11:case"end":return a.stop()}},a,this)}))()}}var m=o.default.create()(h);t.default=m}}]);