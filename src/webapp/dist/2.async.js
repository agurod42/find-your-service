(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[2],{"/z1B":function(e,t,a){"use strict";var r=a("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("2qtc");var s=r(a("kLXV")),d=r(a("pVnL")),i=r(a("q1tI")),l=r(a("hLjA"));r(a("Onig"));class o extends i.default.Component{constructor(e){if(super(e),this.formRef=i.default.createRef(),!e.mode)throw"ServiceModal requires a mode attribute"}render(){return i.default.createElement(s.default,(0,d.default)({},this.props,{destroyOnClose:!0,title:this.renderTitle(),onOk:()=>this.onOkButtonClick()}),i.default.createElement(l.default,{data:this.props.data,ref:this.formRef}))}renderTitle(){return`${this.props.mode[0].toUpperCase()}${this.props.mode.substr(1)} Service`}onOkButtonClick(e){if("function"===typeof this.props.onOk){var t=this.formRef.current.getForm().getFieldsValue();this.props.onOk(e,t)}}}t.default=o},Onig:function(e,t,a){"use strict";var r=a("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(a("dCQc"));class d{index(e){return s.default.request("get","services",e)}show(e){return s.default.request("get",`services/${e}`)}create(e){return s.default.request("post","services",e)}update(e,t){return s.default.request("put",`services/${e}`,t)}delete(e){return s.default.request("delete",`services/${e}`)}}var i=new d;t.default=i},SSZS:function(e,t,a){"use strict";var r=a("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.withApiUtils=void 0;var s=r(a("pVnL")),d=r(a("q1tI")),i=a("dtw8"),l=r(a("a/Iw")),o=()=>e=>{var t;return t=class extends d.default.Component{constructor(){super(...arguments),this.apiUtils={errorHandler:this.errorHandler.bind(this)},this.state={redirect:!1}}errorHandler(e,t){e.response&&403===e.response.status?(l.default.deauthenticate(),this.setState({redirect:!0})):t(e)}render(){return this.state.redirect?d.default.createElement(i.Redirect,{to:"/"}):d.default.createElement(e,(0,s.default)({},this.props,{apiUtils:this.apiUtils}))}},t};t.withApiUtils=o},"a/Iw":function(e,t,a){"use strict";var r=a("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(a("dCQc"));class d{authenticate(e,t){return s.default.request("post","auth",{email:e,password:t}).then(e=>{return s.default.authToken.set(e.data.token),e})}deauthenticate(){s.default.authToken.set(void 0)}isUserAuthenticated(){return null!==s.default.authToken.get()}}var i=new d;t.default=i},abFe:function(e,t,a){"use strict";var r=a("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("IzEo");var s=r(a("bx4M"));a("g9YV");var d=r(a("wCAj"));a("+L6B");var i,l,o,n,u=r(a("2/Rp")),c=r(a("q1tI")),p=r(a("/z1B")),h=a("SSZS"),f=a("fcsW"),m=r(a("Onig")),v=(i=(0,h.withApiUtils)(),l=(0,f.withAuthGuard)(),i(o=l((n=class extends c.default.Component{constructor(e){super(e),this.state={modalData:{},modalMode:"add",modalVisible:!1,services:[]},m.default.index().then(e=>this.setState({services:e.data})).catch(e=>this.props.apiUtils.errorHandler(e,()=>this.setState({error:e})))}render(){return c.default.createElement(s.default,{title:"Services",extra:c.default.createElement(u.default,{type:"primary",icon:"plus",onClick:()=>this.setState({modalData:{},modalMode:"add",modalVisible:!0})},"Add Service"),style:{width:"100%"}},c.default.createElement(d.default,{size:"small",columns:[{dataIndex:"title",title:"Title"},{dataIndex:"description",title:"Description"},{dataIndex:"address",title:"Address"},{dataIndex:"city",title:"City"},{dataIndex:"state",title:"State"},{dataIndex:"zip_code",title:"ZIP Code"},{dataIndex:"location",title:"Location",render:(e,t)=>`${t.location_lat},${t.location_lon}`},{render:(e,t)=>this.renderRowActions(t)}],dataSource:this.state.services,rowKey:"id"}),c.default.createElement(p.default,{data:this.state.modalData,mode:this.state.modalMode,visible:this.state.modalVisible,onOk:(e,t)=>this.onOkButtonClick(t),onCancel:()=>this.setState({modalVisible:!1})}))}renderRowActions(e){return c.default.createElement("div",null,c.default.createElement(u.default,{type:"default",icon:"edit",onClick:()=>this.onEditButtonClick(e)}),c.default.createElement(u.default,{type:"danger",icon:"delete",onClick:()=>this.onDeleteButtonClick(e)}))}onOkButtonClick(e){"add"===this.state.modalMode?m.default.create(e).then(e=>this.setState({modalVisible:!1,services:e.data})):"edit"===this.state.modalMode&&m.default.update(this.state.modalData.id,e).then(e=>this.setState({modalVisible:!1,services:e.data}))}onEditButtonClick(e){m.default.show(e.id).then(e=>this.setState({modalData:e.data,modalMode:"edit",modalVisible:!0})).catch(e=>this.props.apiUtils.errorHandler(e,()=>this.setState({error:e})))}onDeleteButtonClick(e){m.default.delete(e.id).then(e=>this.setState({services:e.data})).catch(e=>this.props.apiUtils.errorHandler(e,()=>this.setState({error:e})))}},o=n))||o)||o),y=v;t.default=y},dCQc:function(e,t,a){"use strict";var r=a("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(a("vDqi")),d=r(a("s4NR"));class i{constructor(){this.axios=s.default.create({baseURL:"https://find-your-service.herokuapp.com"}),this.authToken={get:()=>localStorage.getItem("fys-token"),set:e=>{e?localStorage.setItem("fys-token",e):localStorage.removeItem("fys-token")}}}request(e,t,a){return"get"===e.toLowerCase()&&a&&Object.keys(a).length&&(t+=d.default.stringify(a),a=void 0),this.authToken.get()&&(this.axios.defaults.headers.common["X-Auth-Token"]=this.authToken.get()),this.axios({method:e,url:`${t}`,data:a})}}var l=new i;t.default=l},fcsW:function(e,t,a){"use strict";var r=a("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.withAuthGuard=void 0;var s=r(a("q1tI")),d=a("dtw8"),i=r(a("a/Iw")),l=()=>e=>{return class extends s.default.Component{render(){return i.default.isUserAuthenticated()?s.default.createElement(e,this.props):s.default.createElement(d.Redirect,{to:"/"})}}};t.withAuthGuard=l},hLjA:function(e,t,a){"use strict";var r=a("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("y8nQ");var s=r(a("Vl3Y"));a("5NDa");var d=r(a("5rEg")),i=r(a("q1tI"));class l extends i.default.Component{constructor(){super(...arguments),this.formRules={email:[{required:!0,message:"Email is required"}],password:[{required:!0,message:"Password is required"}]}}render(){return i.default.createElement(s.default,null,this.renderFormItem("title","Title",this.props.data.title,i.default.createElement(d.default,{autoFocus:!0,type:"text",placeholder:"Service #1"})),this.renderFormItem("description","Description",this.props.data.description,i.default.createElement(d.default,{type:"text",placeholder:"Lorem ipsum"})),this.renderFormItem("address","Address",this.props.data.address,i.default.createElement(d.default,{type:"text",placeholder:"51 Sycamore Street"})),this.renderFormItem("city","City",this.props.data.city,i.default.createElement(d.default,{type:"text",placeholder:"New York"})),this.renderFormItem("state","State",this.props.data.state,i.default.createElement(d.default,{type:"text",placeholder:"NY"})),this.renderFormItem("zip_code","ZIP Code",this.props.data.zip_code,i.default.createElement(d.default,{type:"text",placeholder:"10025"})),this.renderFormItem("location_lat","Latitude",this.props.data.location_lat,i.default.createElement(d.default,{type:"text",placeholder:"40.7998309"})),this.renderFormItem("location_lon","Longitude",this.props.data.location_lon,i.default.createElement(d.default,{type:"text",placeholder:"-73.9703027"})))}renderFormItem(e,t,a,r){return i.default.createElement(s.default.Item,{label:t,labelCol:{xs:{span:24,span:6}},wrapperCol:{xs:{span:24,span:18}}},this.props.form.getFieldDecorator(e,{initialValue:a,rules:this.formRules[e]})(r))}}var o=s.default.create()(l);t.default=o}}]);