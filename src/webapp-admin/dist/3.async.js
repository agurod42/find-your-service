(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[3],{"1QcI":function(e,t,r){"use strict";var a=r("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r("y8nQ");var o=a(r("Vl3Y"));r("+L6B");var s=a(r("2/Rp"));r("5NDa");var l=a(r("5rEg"));r("Pwec");var u=a(r("CtXQ")),i=a(r("q1tI"));class d extends i.default.Component{constructor(e){super(e),this.formRules={email:[{required:!0,message:"Email is required"}],password:[{required:!0,message:"Password is required"}]}}render(){return i.default.createElement(o.default,{onSubmit:e=>this.onFormSubmit(e)},this.renderFormItem("email","Email","",i.default.createElement(l.default,{autoFocus:!0,type:"email",placeholder:"Email",prefix:i.default.createElement(u.default,{type:"user",style:{color:"rgba(0,0,0,.25)"}})})),this.renderFormItem("password","Password","",i.default.createElement(l.default,{type:"password",placeholder:"Password",prefix:i.default.createElement(u.default,{type:"lock",style:{color:"rgba(0,0,0,.25)"}})})),i.default.createElement(o.default.Item,null,i.default.createElement(s.default,{type:"primary",htmlType:"submit",loading:this.props.loading},"Login")))}renderFormItem(e,t,r,a){return i.default.createElement(o.default.Item,null,this.props.form.getFieldDecorator(e,{initialValue:r,rules:this.formRules[e]})(a))}onFormSubmit(e){e.preventDefault(),this.props.form.validateFields(e=>{e||"function"!==typeof this.props.onSubmit||this.props.onSubmit()})}}var n=o.default.create()(d);t.default=n},"a/Iw":function(e,t,r){"use strict";var a=r("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=a(r("dCQc"));class s{authenticate(e,t){return o.default.request("post","auth",{email:e,password:t}).then(e=>{return o.default.authToken.set(e.data.token),e})}deauthenticate(){o.default.authToken.set(void 0)}isUserAuthenticated(){return null!==o.default.authToken.get()}}var l=new s;t.default=l},dCQc:function(e,t,r){"use strict";var a=r("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=a(r("vDqi")),s=a(r("s4NR"));class l{constructor(){this.axios=o.default.create({baseURL:"https://find-your-service.herokuapp.com"}),this.authToken={get:()=>window.localStorage.getItem("fys-token"),set:e=>{e?window.localStorage.setItem("fys-token",e):window.localStorage.removeItem("fys-token")}}}request(e,t,r){return"get"===e.toLowerCase()&&r&&Object.keys(r).length&&(t+=`?${s.default.stringify(r)}`,r=void 0),this.authToken.get()&&(this.axios.defaults.headers.common["X-Auth-Token"]=this.authToken.get()),this.axios({method:e,url:`${t}`,data:r})}}var u=new l;t.default=u},hipT:function(e,t,r){"use strict";var a=r("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r("y8nQ");var o=a(r("Vl3Y"));r("B9cy");var s=a(r("Ol7k"));r("IzEo");var l=a(r("bx4M"));r("fOrg");var u=a(r("+KLJ")),i=a(r("q1tI")),d=a(r("1QcI")),n=a(r("a/Iw"));class f extends i.default.Component{constructor(e){super(e),this.formRef=i.default.createRef(),this.state={error:!1,loading:!1}}render(){return i.default.createElement(s.default.Content,{style:{width:384}},i.default.createElement(l.default,{title:"Login"},this.state.error&&i.default.createElement(u.default,{type:"error",closable:!0,message:"Login failed",description:this.state.error}),i.default.createElement(d.default,{ref:this.formRef,loading:this.state.loading,onSubmit:()=>this.onFormSubmit()})))}renderFormItem(e,t){return this.props.form.getFieldDecorator(e,{rules:this.formRules[e]})(t)}onFormSubmit(){this.setState({loading:!0});var e=this.formRef.current.getForm().getFieldsValue();n.default.authenticate(e.email,e.password).then(()=>{this.props.history.push("/")}).catch(e=>{this.setState({error:e.response.data.error,loading:!1})})}}var c=o.default.create()(f);t.default=c}}]);